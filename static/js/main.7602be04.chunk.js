(this["webpackJsonpmovie-search"]=this["webpackJsonpmovie-search"]||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(0),r=c.n(a),i=c(16),s=c.n(i),o=c(5),l=c(11),j=c(3),u=c(10),d=c.n(u),b=c(13),h=c(9),p=function(e){return{type:"LOAD_FILMS",payload:e}},f={"X-API-KEY":"41bf77c1-b2b8-4711-b6b6-76cf890ced57"},m=function(){var e=r.a.useState(""),t=Object(h.a)(e,2),c=t[0],a=t[1],i=Object(o.b)(),s=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i({type:"LOADING"}),e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword=".concat(t),{headers:f});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.films,i(p(a));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.useEffect((function(){s(c)})),Object(n.jsx)("div",{className:"headerWrapper",children:Object(n.jsxs)("div",{className:"headerItems",children:[Object(n.jsx)(l.b,{to:"/",children:Object(n.jsx)("h1",{children:"ALL FILMS"})}),Object(n.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c,onChange:function(e){return t=e.target.value,void a(t);var t}}),Object(n.jsx)("img",{src:"https://cdn1.iconfinder.com/data/icons/jumpicon-basic-ui-line-1/32/-_Magnifier-Search-Zoom--512.png",alt:"magnifier",width:"25px",height:"25px"})]})})},O=function(e){var t=e.film,c=Object(o.b)();return Object(n.jsxs)("div",{className:"cardWrapper",children:[Object(n.jsx)("h3",{className:"cardName",children:t.nameRu}),Object(n.jsx)("h4",{children:"(".concat(t.year,")")}),Object(n.jsx)(l.b,{to:"/filmPage",children:Object(n.jsx)("img",{onClick:function(){return e=t.filmId,void c(function(e){return{type:"GET_ID",payload:e}}(e));var e},className:"cardImg",alt:"Poster",src:t.posterUrlPreview})})]})},x=function(){return Object(n.jsx)("div",{className:"loader"})},v=function(){var e=Object(o.c)((function(e){return e})),t=e.films,c=e.isLoaded;return Object(n.jsx)("div",{className:"filmsWrapper",children:c?t.length?t.map((function(e,t){return Object(n.jsx)(O,{film:e},t)})):Object(n.jsx)("h1",{children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0447\u0442\u043e \u043d\u0438\u0431\u0443\u0434\u044c \u0438\u0441\u043a\u0430\u0442\u044c :)"}):Object(n.jsx)(x,{})})},g=function(e){var t=e.infoItem,c=e.i,a=r.a.useState(!1),i=Object(h.a)(a,2),s=i[0],o=i[1];return Object(n.jsxs)("div",{className:"infoItem ".concat(t.item&&t.item.length?"":"hide"),children:[Object(n.jsx)("h3",{children:t.title}),1===c?Object(n.jsx)("ul",{children:t.item.map((function(e,t){return Object(n.jsx)("li",{children:e.genre},t)}))}):3===c?Object(n.jsxs)("details",{children:[Object(n.jsx)("summary",{onClick:function(){o(!s)},children:s?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"}),Object(n.jsx)("ul",{children:t.item.map((function(e,t){return Object(n.jsx)("li",{children:e},t)}))})]}):4===c?Object(n.jsx)("div",{className:"trailerBlock",children:Object(n.jsx)("iframe",{width:"660",height:"415",src:"https://www.youtube.com/embed/".concat(t.item,"?&disablekb=0"),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):Object(n.jsx)("p",{children:t.item})]})},w=function(e){return{type:"INITIAL_SLIDER",payload:e}},k={"X-API-KEY":"41bf77c1-b2b8-4711-b6b6-76cf890ced57"},y=function(e){var t=e.id,c=e.autoSliderInit,a=e.position,i=e.changePosition,s=r.a.useState([]),l=Object(h.a)(s,2),j=l[0],u=l[1],p=r.a.useState(1),f=Object(h.a)(p,2),m=f[0],O=f[1],x=null,v=Object(o.b)(),g=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t,"/frames"),{headers:k});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.frames,r=a.filter((function(e,t){return t<15})),u(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),u([]);case 15:case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();c&&j.length&&(x=setInterval((function(){O(m===j.length-1?0:m+1),clearInterval(x)}),3e3));var y=function(){clearInterval(x),v(w(!1))};return console.log(a),r.a.useEffect((function(){g(t),i()}),[]),Object(n.jsxs)("div",{className:"sliderWrapper",children:[Object(n.jsx)("div",{className:"sliderBlock",children:j.length?j.map((function(e,t){return Object(n.jsx)("img",{src:e.image,style:(c=t,{margin:"0 auto",display:"block",marginTop:"".concat(c>0?"-".concat(a):""),borderRadius:"3px",transition:"1.5s",zIndex:c+1,opacity:"".concat(c===m?"100%":"0")})},t);var c})):Object(n.jsx)("img",{src:"https://argamak-sher.uz/wp-content/uploads/no-image.png"})}),Object(n.jsxs)("div",{className:"sliderBtnBlock ".concat(j.length?"":"hide"),children:[Object(n.jsx)("button",{onClick:function(){y(),O(0===m?j.length-1:m-1)},children:Object(n.jsx)("svg",{className:"left",width:"50",height:"50",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"black"})})}),Object(n.jsx)("button",{onClick:function(){y(),O(m===j.length-1?0:m+1)},children:Object(n.jsxs)("svg",{className:"right",width:"50",height:"50",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(n.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"black"}),Object(n.jsx)("g",{})]})})]})]})},I={"X-API-KEY":"41bf77c1-b2b8-4711-b6b6-76cf890ced57"},N=function(){var e=r.a.useState(null),t=Object(h.a)(e,2),c=t[0],a=t[1],i=r.a.useState(""),s=Object(h.a)(i,2),j=s[0],u=s[1],p=r.a.useState("440px"),f=Object(h.a)(p,2),m=f[0],O=f[1],v=Object(o.c)((function(e){return e})),k=v.id,N=v.autoSlider,C=Object(o.b)(),L=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t),{headers:I});case 2:return c=e.sent,e.next=5,c.json();case 5:n=e.sent,r=n.data,a(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t,"/videos"),{headers:I});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,a=n.trailers,r=a[0].url.split("=").filter((function(e,t){return 1===t})).join(),u(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),u(""),console.log(e.t0);case 16:case 17:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();r.a.useEffect((function(){L(k),S(k),C(w(!0))}),[]);var P=[{title:"\u0421\u0442\u0440\u0430\u043d\u0430",item:c?c.countries[0].country:[]},{title:"\u0416\u0430\u043d\u0440",item:c?c.genres:[]},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",item:c?c.description:[]},{title:"\u0424\u0430\u043a\u0442\u044b",item:c?c.facts:[]},{title:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440",item:j}];return Object(n.jsx)("div",{className:"filmPage",children:c?Object(n.jsxs)("div",{className:"filmBlock",children:[Object(n.jsx)(y,{id:k,autoSliderInit:N,changePosition:function(){var e=document.body.clientWidth;e<=950&&e>=360?O("340px"):e<=350&&O("300px"),console.log("\u0420\u0430\u0437\u043c\u0435\u0440 \u043e\u043a\u043d\u0430",e)},position:m}),Object(n.jsxs)("div",{className:"infoWrapper",children:[Object(n.jsx)("img",{className:"desctopPoster",src:c.posterUrlPreview,alt:"poster"}),Object(n.jsxs)("div",{className:"infoBlock",children:[Object(n.jsxs)("div",{className:"nameBlock",children:[Object(n.jsx)("img",{className:"mobilePoster",src:c.posterUrlPreview,alt:"poster"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:c.nameRu}),Object(n.jsx)("span",{children:Object(n.jsx)("p",{children:"".concat(c.nameEn," (").concat(c.year,")")})})]})]}),P.map((function(e,t){return Object(n.jsx)(g,{infoItem:e,i:t})})),Object(n.jsx)("div",{className:"infoItem",children:Object(n.jsx)(l.b,{to:"/",children:Object(n.jsx)("h4",{children:"\u0412\u0435\u0440\u043d\u0443\u0442\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})]})]})]}):Object(n.jsx)(x,{})})},C=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsx)(j.a,{path:"/",component:v,exact:!0}),Object(n.jsx)(j.a,{path:"/filmPage",component:N,exact:!0})]})},L=(c(37),c(12)),S=c(18),P={films:null,isLoaded:!1,id:null,autoSlider:!0},E=Object(S.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoaded:!1});case"LOAD_FILMS":return Object(L.a)(Object(L.a)({},e),{},{films:t.payload,isLoaded:!0});case"GET_ID":return Object(L.a)(Object(L.a)({},e),{},{id:t.payload});case"INITIAL_SLIDER":return Object(L.a)(Object(L.a)({},e),{},{autoSlider:t.payload});default:return e}}));s.a.render(Object(n.jsx)(l.a,{children:Object(n.jsx)(o.a,{store:E,children:Object(n.jsx)(C,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.7602be04.chunk.js.map