(this["webpackJsonpmovie-search"]=this["webpackJsonpmovie-search"]||[]).push([[0],{37:function(e,t,c){},38:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),i=c.n(r),a=c(17),s=c.n(a),o=c(4),l=c(10),u=c(3),j=c(11),d=c.n(j),b=c(15),f=c(12),p=function(e){return{type:"LOAD_FILMS",payload:e}},h={"X-API-KEY":"41bf77c1-b2b8-4711-b6b6-76cf890ced57"},m=function(){var e=i.a.useState(""),t=Object(f.a)(e,2),c=t[0],r=t[1],a=Object(o.b)(),s=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOADING"}),e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/search-by-keyword?keyword=".concat(t),{headers:h});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,r=n.films,a(p(r));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.useEffect((function(){s(c)})),Object(n.jsx)("div",{className:"headerWrapper",children:Object(n.jsxs)("div",{className:"headerItems",children:[Object(n.jsx)(l.b,{to:"/",children:Object(n.jsx)("h1",{children:"ALL FILMS"})}),Object(n.jsx)(l.b,{to:"/",children:Object(n.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c,onChange:function(e){return t=e.target.value,void r(t);var t}})}),Object(n.jsx)("img",{src:"https://cdn1.iconfinder.com/data/icons/jumpicon-basic-ui-line-1/32/-_Magnifier-Search-Zoom--512.png",alt:"magnifier",width:"25px",height:"25px"})]})})},O=function(e){var t=e.film,c=Object(o.b)();return Object(n.jsxs)("div",{className:"cardWrapper",children:[Object(n.jsx)("h3",{className:"cardName",children:t.nameRu}),Object(n.jsx)("h4",{children:"(".concat(t.year,")")}),Object(n.jsx)(l.b,{to:"/filmPage",children:Object(n.jsx)("img",{onClick:function(){return e=t.filmId,void c(function(e){return{type:"GET_ID",payload:e}}(e));var e},className:"cardImg",alt:"Poster",src:t.posterUrlPreview})})]})},x=function(){return Object(n.jsx)("div",{className:"loader"})},v=function(){var e=Object(o.c)((function(e){return e.films})),t=e.films,c=e.isLoaded;return Object(n.jsx)("div",{className:"filmsWrapper",children:c?t.length?t.map((function(e,t){return Object(n.jsx)(O,{film:e},t)})):Object(n.jsx)("h1",{children:"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0447\u0442\u043e \u043d\u0438\u0431\u0443\u0434\u044c \u0438\u0441\u043a\u0430\u0442\u044c :)"}):Object(n.jsx)(x,{})})},g=i.a.memo((function(e){var t=e.infoItem,c=e.i,r=i.a.useState(!1),a=Object(f.a)(r,2),s=a[0],o=a[1];return Object(n.jsxs)("div",{className:"infoItem ".concat(t.item&&t.item.length?"":"hide"),children:[Object(n.jsx)("h3",{children:t.title}),1===c?Object(n.jsx)("ul",{children:t.item.map((function(e,t){return Object(n.jsx)("li",{children:e.genre},t)}))}):3===c?Object(n.jsxs)("details",{children:[Object(n.jsx)("summary",{onClick:function(){o(!s)},children:s?"\u0421\u043a\u0440\u044b\u0442\u044c":"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"}),Object(n.jsx)("ul",{children:t.item.map((function(e,t){return Object(n.jsx)("li",{children:e},t)}))})]}):4===c?Object(n.jsx)("div",{className:"trailerBlock",children:Object(n.jsx)("iframe",{width:"660",height:"415",src:"https://www.youtube.com/embed/".concat(t.item),frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):Object(n.jsx)("p",{children:t.item})]})})),w=function(e){return{type:"LOAD_FRAMES",payload:e}},y=function(e){return{type:"CHANGE_COUNTER",payload:e}},N=function(e){var t=e.count,c=e.position,r=e.frames,a=Object(o.b)();return i.a.useEffect((function(){a(y(0))}),[]),Object(n.jsxs)("div",{className:"sliderWrapper",children:[Object(n.jsx)("div",{className:"sliderBlock",children:r.length?r.map((function(e,r){return Object(n.jsx)("img",{alt:"frame",src:e.image,style:(i=r,{margin:"0 auto",display:"block",marginTop:"".concat(i>0?"-".concat(c):""),borderRadius:"3px",transition:"1.5s",zIndex:i+1,opacity:"".concat(i===t?"100%":"0")})},r);var i})):Object(n.jsx)("img",{alt:"no-frame",src:"https://argamak-sher.uz/wp-content/uploads/no-image.png"})}),Object(n.jsxs)("div",{className:"sliderBtnBlock ".concat(r.length?"":"hide"),children:[Object(n.jsx)("button",{onClick:function(){a(y(0===t?r.length-1:--t))},children:Object(n.jsx)("svg",{className:"left",width:"50",height:"50",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"black"})})}),Object(n.jsx)("button",{onClick:function(){a(y(t===r.length-1?0:++t))},children:Object(n.jsx)("svg",{className:"right",width:"50",height:"50",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("path",{d:"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z",fill:"black"})})})]})]})},k={"X-API-KEY":"41bf77c1-b2b8-4711-b6b6-76cf890ced57"},C=i.a.memo((function(){var e=i.a.useState(null),t=Object(f.a)(e,2),c=t[0],r=t[1],a=i.a.useState(""),s=Object(f.a)(a,2),u=s[0],j=s[1],p=Object(o.c)((function(e){return e.films})).id,h=Object(o.c)((function(e){return e.slider})),m=h.autoSlider,O=h.sliderCount,v=h.slidePosition,y=h.frames,C=Object(o.b)();console.log(p);var I=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t),{headers:k});case 2:return c=e.sent,e.next=5,c.json();case 5:n=e.sent,i=n.data,r(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,r,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t,"/videos"),{headers:k});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,r=n.trailers,i=r.filter((function(e){return"YOUTUBE"===e.site})),s=i[0].url,a=s.includes("=")?s.split("=").filter((function(e,t){return 1===t})).join():s.split("").reverse().join("").split("/")[0].split("").reverse().join(""),j(a),console.log(r),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),j(""),console.log(e.t0);case 18:case 19:case"end":return e.stop()}var s}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(b.a)(d.a.mark((function e(t){var c,n,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://kinopoiskapiunofficial.tech/api/v2.1/films/".concat(t,"/frames"),{headers:k});case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,r=n.frames,i=r.filter((function(e,t){return t<15})),C(w(i)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C(w([]));case 15:case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();i.a.useEffect((function(){I(p),E(p),L(p),C(w([])),C({type:"SLIDE_POSITION"})}),[]);var _=[{title:"\u0421\u0442\u0440\u0430\u043d\u0430",item:c?c.countries[0].country:[]},{title:"\u0416\u0430\u043d\u0440",item:c?c.genres:[]},{title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",item:c?c.description:[]},{title:"\u0424\u0430\u043a\u0442\u044b",item:c?c.facts:[]},{title:"\u0422\u0440\u0435\u0439\u043b\u0435\u0440",item:u}];return Object(n.jsx)("div",{className:"filmPage",children:c?Object(n.jsxs)("div",{className:"filmBlock",children:[Object(n.jsx)(N,{id:p,autoSliderInit:m,count:O,position:v,frames:y}),Object(n.jsxs)("div",{className:"infoWrapper",children:[Object(n.jsx)("img",{className:"desctopPoster",src:c.posterUrlPreview,alt:"poster"}),Object(n.jsxs)("div",{className:"infoBlock",children:[Object(n.jsxs)("div",{className:"nameBlock",children:[Object(n.jsx)("img",{className:"mobilePoster",src:c.posterUrlPreview,alt:"poster"}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:c.nameRu}),Object(n.jsx)("span",{children:Object(n.jsx)("p",{children:"".concat(c.nameEn," (").concat(c.year,")")})})]})]}),_.map((function(e,t){return Object(n.jsx)(g,{infoItem:e,i:t},t)})),Object(n.jsx)("div",{className:"infoItem",children:Object(n.jsx)(l.b,{to:"/",children:Object(n.jsx)("h4",{children:"\u0412\u0435\u0440\u043d\u0443\u0442\u0441\u044f \u043d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})})})]})]})]}):Object(n.jsx)(x,{})})})),I=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)(m,{}),Object(n.jsx)(u.a,{path:"/",component:v,exact:!0}),Object(n.jsx)(u.a,{path:"/filmPage",component:C,exact:!0})]})},E=(c(37),c(14)),L=c(6),_={films:null,isLoaded:!1,id:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING":return Object(L.a)(Object(L.a)({},e),{},{isLoaded:!1});case"LOAD_FILMS":return Object(L.a)(Object(L.a)({},e),{},{films:t.payload,isLoaded:!0});case"GET_ID":return Object(L.a)(Object(L.a)({},e),{},{id:t.payload});default:return e}},P={frames:[],sliderCount:1,slidePosition:null},D=function(){var e=document.body.clientWidth;return e<=950&&e>=360?"340px":e<=350?"300px":"440px"},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_FRAMES":return Object(L.a)(Object(L.a)({},e),{},{frames:t.payload});case"CHANGE_COUNTER":return Object(L.a)(Object(L.a)({},e),{},{sliderCount:t.payload});case"SLIDE_POSITION":return Object(L.a)(Object(L.a)({},e),{},{slidePosition:D()});default:return e}},B=Object(E.b)({films:S,slider:A}),T=Object(E.c)(B,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());s.a.render(Object(n.jsx)(l.a,{children:Object(n.jsx)(o.a,{store:T,children:Object(n.jsx)(I,{})})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.bf65146b.chunk.js.map